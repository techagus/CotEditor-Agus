<html lang="es">

<head>
	<meta charset="UTF-8"/>
	<meta name="keywords" content="Menú de guión, guión, menú de script, script"/>
	<link rel="stylesheet" href="../../Shared/sty/standard.css"/>
	<script defer src="../../Shared/js/toc.js"></script>
	
	<title>Script CotEditor con guión UNIX</title>
</head>

<body>

<h1>Script CotEditor con script UNIX</h1>

<p>Esta página explica cómo pasar el texto de su documento a los scripts UNIX que son ejecutables a través del menú Script, o cómo recibir los resultados de ellos.</p>

<ul>
	<li>Las extensiones de nombre de archivo de los scripts que puedes añadir al menú Script son: .sh, .pl, .php, .rb, .py, .js y .swift (independientemente del idioma)</li>
	<li>Para ejecutar un script, debe establecer el permiso de ejecución para el archivo de script.</li>
</ul>


<h2>Consulte la ruta del archivo del documento</h2>

<p>Si el documento principal ya se ha guardado, la ruta de archivo absoluta del documento se denominará como un argumento.</p>


<h2>Pasar datos de texto a un script</h2>

<p>Un script puede recibir el contenido del documento principal en STDIN (entrada estándar). Para pasar datos de texto de CotEditor a tu script, debes poner un comentario al principio del script y escribir “<code>%%%{CotEditorXInput=<var>xxxx</var>}%%%</code>” en su interior. Reemplazar “<code><var>xxxx</var></code>” con uno de los siguientes parámetros. Sin parámetros, CotEditor no pasa nada como cuando pones “<coee>None</code>.”</p>

<ul>
	<li>CotEditor pasa datos de texto codificados con UTF-8.</li>
</ul>

<table>
	<thead>
		<tr><th>Palabra clave</th><th>Descripción</th></tr>
	</thead>
	<tbody>
		<tr><th><code>Selection</code></th><td>Para pasar el texto que estás seleccionando actualmente.</td></tr>
		<tr><th><code>AllText</code></th><td>Para pasar el texto completo de su documento.</td></tr>
		<tr><th><code>None</code></th><td>Para no pasar nada (por defecto).</td></tr>
	</tbody>
</table>


<h2>Recibir datos de salida de un script</h2>

<p>CotEditor puede recibir el texto de salida del script en STDOUT (salida estándar) y aplicarlo al documento, etc. Para que CotEditor reciba datos de salida de un script, debe poner un comentario al principio del script y escribir “<code>%%%{CotEditorXOutput=<var>xxxx</var>}%%%</code>” en su interior. Reemplazar <code><var>xxxx</var></code> Con uno de los siguientes parámetros. Sin parámetros, CotEditor no hace nada como cuando pones “<code>Discard</code>.”</p>

<ul>
	<li>La codificación del texto que recibe CotEditor debe ser UTF-8.</li>
</ul>

<table>
	<thead>
		<tr><th>Palabra clave</th><th>Descripción</th></tr>
	</thead>
	<tbody>
		<tr><th><code>ReplaceSelection</code></th><td>Para reemplazar la selección actual con el contenido de los datos de salida.</td></tr>
		<tr><th><code>ReplaceAllText</code></th><td>Para reemplazar todo el texto de su documento con el contenido de los datos de salida.</td></tr>
		<tr><th><code>InsertAfterSelection</code></th><td>Para insertar el contenido de los datos de salida justo después de la selección actual.</td></tr>
		<tr><th><code>AppendToAllText</code></th><td>Para insertar el contenido de los datos de salida al final de su documento.</td></tr>
		<tr><th><code>NewDocument</code></th><td>Para crear un nuevo documento e insertar el contenido en él.</td></tr>
		<tr><th><code>Pasteboardputs</code></th><td>Para almacenar el contenido de los datos de salida en el portapapeles.</td></tr>
		<tr><th><code>Discard</code></th><td>No hacer nada (por defecto).</td></tr>
	</tbody>
</table>


<h2>Imprimir texto en la consola</h2>

<p>La cadena lanzada a la salida del error estándar se imprimirá en la ventana de la consola.</p>


<h2>Ejemplo</h2>

<p>El siguiente script de Python antepone el carácter "&gt;" a cada línea de la selección del documento principal, y luego imprime el número de líneas procesadas en la consola.</p>

<pre class="source"><code><span class="comment">#!/usr/bin/env python3
# %%%{CotEditorXInput=Selection}%%%
# %%%{CotEditorXOutput=ReplaceSelection}%%%</span>

<span class="keyword">import</span> sys

count = 0
<span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:
    count += 1
    print(<span class="string">&quot;&gt;&quot;</span> + line.rstrip())
sys.stderr.write(<span class="string">&quot;{} líneas procesadas.&quot;</span>.format(count))
</code></pre>

<figure>
	<figcaption>Salida de la consola</figcaption>
	<img src="../gfx/console@2x.png" width="400" alt="[2023-08-06 15:02:39] Ejemplo de Código&#x0A;5 líneas procesadas."/>
</figure>

<p>Puedes obtener más scripts de ejemplo en:<br/>
<a href="https://github.com/coteditor/SampleScripts" rel="external">coteditor/SampleScripts -GitHub</a></p>


<section id="cf">
<h2>Ver también</h2>
<ul>
	<li><a href="script_overview.html">Script CotEditor</a></li>
</ul>
</section>

</body>
</html>
